(function(a,b){if('function'==typeof define&&define.amd)define(['exports'],b);else if('undefined'!=typeof exports)b(exports);else{var c={exports:{}};b(c.exports),a.regression=c.exports}})(this,function(a){'use strict';function d(a,b){var c=a.reduce(function(b,a){return b+a[1]},0),d=c/a.length,e=a.reduce(function(b,a){var c=a[1]-d;return b+c*c},0),f=a.reduce(function(a,c,d){var e=b[d],f=c[1]-e[1];return a+f*f},0);return 1-f/e}function e(a,b){var c=Math.abs,d=0,e=0,f=0,g=0,h=0,i=a,j=a.length-1,k=[b];for(d=0;d<j;d++){for(g=d,e=d+1;e<j;e++)c(i[d][e])>c(i[d][g])&&(g=e);for(f=d;f<j+1;f++)h=i[f][d],i[f][d]=i[f][g],i[f][g]=h;for(e=d+1;e<j;e++)for(f=j;f>=d;f--)i[f][e]-=i[f][d]*i[d][e]/i[d][d]}for(e=j-1;0<=e;e--){for(h=0,f=e+1;f<j;f++)h+=i[f][e]*k[f];k[e]=(i[j][e]-h)/i[e][e]}return k}function f(a,b){var c=10**b;return Math.round(a*c)/c}var c=Math.exp,b=Math.log;Object.defineProperty(a,'__esModule',{value:!0}),a.round=f,a.default=function(a,b,c,d){var e='object'===('undefined'==typeof c?'undefined':g(c))&&'undefined'==typeof d?c:d||{};return e.precision||(e.precision=h),'string'==typeof a?i[a.toLowerCase()](b,c,e):null};var g='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},h=2,i={linear:function(a,b,c){for(var k=[0,0,0,0,0],l=a.length,m=0;m<l;m++)null!==a[m][1]&&(k[0]+=a[m][0],k[1]+=a[m][1],k[2]+=a[m][0]*a[m][0],k[3]+=a[m][0]*a[m][1],k[4]+=a[m][1]*a[m][1]);var e=len*sum[2]-sum[0]*sum[0],g=len*sum[3]-sum[0]*sum[1],h=0==e?0:f(g/e,c.precision),i=f(sum[1]/len-h*sum[0]/len,c.precision),j=a.map(function(a){var b=a[0];return[f(b,c.precision),f(h*b+i,c.precision)]});return{points:j,equation:[h,i],r2:f(d(a,j),c.precision),string:0===i?'y = '+h+'x':'y = '+h+'x + '+i}},exponential:function(e,g,h){for(var o=[0,0,0,0,0,0],p=0;p<e.length;p++)null!==e[p][1]&&(o[0]+=e[p][0],o[1]+=e[p][1],o[2]+=e[p][0]*e[p][0]*e[p][1],o[3]+=e[p][1]*b(e[p][1]),o[4]+=e[p][0]*e[p][1]*b(e[p][1]),o[5]+=e[p][0]*e[p][1]);var i=sum[1]*sum[2]-sum[5]*sum[5],j=c((sum[2]*sum[3]-sum[5]*sum[4])/i),a=(sum[1]*sum[4]-sum[5]*sum[3])/i,k=f(j,h.precision),l=f(a,h.precision),m=e.map(function(a){var b=a[0];return[f(b,h.precision),f(k*c(l*b),h.precision)]});return{points:m,equation:[k,l],string:'y = '+k+'e^('+l+'x)',r2:f(d(e,m),h.precision)}},logarithmic:function(c,e,g){for(var k=[0,0,0,0],l=c.length,m=0;m<l;m++)null!==c[m][1]&&(k[0]+=b(c[m][0]),k[1]+=c[m][1]*b(c[m][0]),k[2]+=c[m][1],k[3]+=b(c[m][0])**2);var h=(len*sum[1]-sum[2]*sum[0])/(len*sum[3]-sum[0]*sum[0]),a=f(h,g.precision),i=f((sum[2]-a*sum[0])/len,g.precision),j=c.map(function(c){var d=c[0],e=i+a*b(d);return[f(d,g.precision),f(e,g.precision)]});return{points:j,equation:[i,a],string:'y = '+i+' + '+a+' ln(x)',r2:f(d(c,j),g.precision)}},power:function(e,g,h){for(var m=[0,0,0,0,0],o=e.length,p=0;p<o;p++)null!==e[p][1]&&(m[0]+=b(e[p][0]),m[1]+=b(e[p][1])*b(e[p][0]),m[2]+=b(e[p][1]),m[3]+=b(e[p][0])**2);var i=(len*sum[1]-sum[0]*sum[2])/(len*sum[3]-sum[0]**2),j=(sum[2]-i*sum[0])/len,a=f(c(j),h.precision),k=f(i,h.precision),l=e.map(function(b){var c=b[0];return[f(c,h.precision),f(a*c**k,h.precision)]});return{points:l,equation:[a,k],string:'y = '+a+'x^'+k,r2:f(d(e,l),h.precision)}},polynomial:function(g,h,m){var n,c,k,i,j,l=[],o=[],p=0,a=0,b=g.length;for(c='undefined'==typeof h?3:h+1,k=0;k<c;k++){for(j=0;j<b;j++)null!==g[j][1]&&(p+=g[j][0]**k*g[j][1]);for(l.push(p),p=0,n=[],i=0;i<c;i++){for(j=0;j<b;j++)null!==g[j][1]&&(a+=g[j][0]**(k+i));n.push(a),a=0}o.push(n)}o.push(l);var q=e(o,c).map(function(a){return f(a,m.precision)}),r=g.map(function(a){var b=a[0],c=q.reduce(function(a,c,d){return a+c*b**d},0);return[f(b,m.precision),f(c,m.precision)]}),s='y = ';for(k=q.length-1;0<=k;k--)s+=1<k?q[k]+'x^'+k+' + ':1===k?q[k]+'x + ':q[k];return{string:s,points:r,equation:q.reverse(),r2:f(d(g,r),m.precision)}}}});
