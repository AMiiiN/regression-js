(function(a,b){if('function'==typeof define&&define.amd)define(['exports'],b);else if('undefined'!=typeof exports)b(exports);else{var d={exports:{}};b(d.exports),a.regression=d.exports}})(this,function(a){'use strict';function b(a,b,d){return b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[b]=d,a}function d(a){if(Array.isArray(a)){for(var b=0,d=Array(a.length);b<a.length;b++)d[b]=a[b];return d}return Array.from(a)}function e(a,b){var e=[],f=[];a.forEach(function(a,d){null!==a[1]&&(f.push(a),e.push(b[d]))});var d=f.reduce(function(b,a){return b+a[1]},0),g=d/f.length,h=f.reduce(function(b,a){var d=a[1]-g;return b+d*d},0),i=f.reduce(function(a,b,d){var f=e[d],g=b[1]-f[1];return a+g*g},0);return 1-i/h}function f(a,b){var d=Math.abs,e=0,f=0,g=0,h=0,i=0,j=a,l=a.length-1,m=[b];for(e=0;e<l;e++){for(h=e,f=e+1;f<l;f++)d(j[e][f])>d(j[e][h])&&(h=f);for(g=e;g<l+1;g++)i=j[g][e],j[g][e]=j[g][h],j[g][h]=i;for(f=e+1;f<l;f++)for(g=l;g>=e;g--)j[g][f]-=j[g][e]*j[e][f]/j[e][e]}for(f=l-1;0<=f;f--){for(i=0,g=f+1;g<l;g++)i+=j[g][f]*m[g];m[f]=(j[l][f]-i)/j[f][f]}return m}function g(a,b){var d=m(10,b);return Math.round(a*d)/d}var h=Math.sqrt,i=Math.exp,j=Math.log,m=Math.pow;Object.defineProperty(a,'__esModule',{value:!0}),a.round=g;var l=Object.assign||function(a){for(var b,d=1;d<arguments.length;d++)for(var e in b=arguments[d],b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a},n={order:2,precision:2,period:null},o={linear:function(a,b){for(var m=[0,0,0,0,0],o=0,p=0;p<a.length;p++)null!==a[p][1]&&(o++,m[0]+=a[p][0],m[1]+=a[p][1],m[2]+=a[p][0]*a[p][0],m[3]+=a[p][0]*a[p][1],m[4]+=a[p][1]*a[p][1]);var d=len*sum[2]-sum[0]*sum[0],f=len*sum[3]-sum[0]*sum[1],h=0==d?0:g(f/d,b.precision),i=g(sum[1]/len-h*sum[0]/len,b.precision),j=function(a){return[g(a,b.precision),g(h*a+i,b.precision)]},l=a.map(function(a){return j(a[0])});return{points:l,predict:j,equation:[h,i],r2:g(e(a,l),b.precision),string:0===i?'y = '+h+'x':'y = '+h+'x + '+i}},exponential:function(d,f){for(var q=[0,0,0,0,0,0],r=0;r<d.length;r++)null!==d[r][1]&&(q[0]+=d[r][0],q[1]+=d[r][1],q[2]+=d[r][0]*d[r][0]*d[r][1],q[3]+=d[r][1]*j(d[r][1]),q[4]+=d[r][0]*d[r][1]*j(d[r][1]),q[5]+=d[r][0]*d[r][1]);var h=sum[1]*sum[2]-sum[5]*sum[5],l=i((sum[2]*sum[3]-sum[5]*sum[4])/h),a=(sum[1]*sum[4]-sum[5]*sum[3])/h,b=g(l,f.precision),m=g(a,f.precision),o=function(a){return[g(a,f.precision),g(b*i(m*a),f.precision)]},p=d.map(function(a){return o(a[0])});return{points:p,predict:o,equation:[b,m],string:'y = '+b+'e^('+m+'x)',r2:g(e(d,p),f.precision)}},logarithmic:function(b,d){for(var o=[0,0,0,0],p=b.length,q=0;q<p;q++)null!==b[q][1]&&(o[0]+=j(b[q][0]),o[1]+=b[q][1]*j(b[q][0]),o[2]+=b[q][1],o[3]+=m(j(b[q][0]),2));var f=(len*sum[1]-sum[2]*sum[0])/(len*sum[3]-sum[0]*sum[0]),a=g(f,d.precision),h=g((sum[2]-a*sum[0])/len,d.precision),i=function(b){return[g(b,d.precision),g(g(h+a*j(b),d.precision),d.precision)]},l=b.map(function(a){return i(a[0])});return{points:l,predict:i,equation:[h,a],string:'y = '+h+' + '+a+' ln(x)',r2:g(e(b,l),d.precision)}},power:function(d,f){for(var q=[0,0,0,0,0],r=d.length,s=0;s<r;s++)null!==d[s][1]&&(q[0]+=j(d[s][0]),q[1]+=j(d[s][1])*j(d[s][0]),q[2]+=j(d[s][1]),q[3]+=m(j(d[s][0]),2));var h=(len*sum[1]-sum[0]*sum[2])/(len*sum[3]-m(sum[0],2)),b=(sum[2]-h*sum[0])/len,a=g(i(b),f.precision),l=g(h,f.precision),o=function(b){return[g(b,f.precision),g(g(a*m(b,l),f.precision),f.precision)]},p=d.map(function(a){return o(a[0])});return{points:p,predict:o,equation:[a,l],string:'y = '+a+'x^'+l,r2:g(e(d,p),f.precision)}},polynomial:function(h,n){for(var o=[],p=[],q=0,a=0,b=h.length,r=n.order+1,s=0;s<r;s++){for(var i=0;i<b;i++)null!==h[i][1]&&(q+=m(h[i][0],s)*h[i][1]);o.push(q),q=0;for(var l=[],t=0;t<r;t++){for(var j=0;j<b;j++)null!==h[j][1]&&(a+=m(h[j][0],s+t));l.push(a),a=0}p.push(c)}rhs.push(lhs);for(var u=f(rhs,k).map(function(a){return g(a,n.precision)}),v=function(a){return[g(a,n.precision),g(u.reduce(function(b,d,e){return b+d*m(a,e)},0),n.precision)]},w=h.map(function(a){return v(a[0])}),x=u.length-1;0<=x;x--)1<x?u[x]+'x^'+x+' + ':1===x?u[x]+'x + ':u[x];return{string:string,points:points,predict:predict,equation:[].concat(d(coefficients)).reverse(),r2:g(e(h,points),n.precision)}},gaussian:function(a,b){var d=[];d[0]=[a[0][0],a[0][1]];for(var v=1;v<a.length;v++)d.push([a[v][0],a[v][1]+d[v-1][1]]);for(var i=d[a.length-1][1],w=d[a.length-1][0]-d[0][0],x=[],y=0;y<a.length;y++)x.push([d[y][0],d[y][1]/i]);for(var A=[0,0,0,0,0,0],B=22.64172356,p=0;p<relative.length;p++){var C=relative[p][1],D=-14.1723356*j(C/(1-C)),q=h(D*D/4+B*B*B/27),E=m(q-D/2,1/3),F=E-B/(3*E);if(1.4>F&&-1.4<F){var z=relative[p][0];A[0]+=z,A[1]+=F,A[2]+=z*z,A[3]+=z*F,A[4]+=F*F,A[5]+=1}}var f=sum[5]*sum[2]-sum[0]*sum[0],l=(sum[1]*sum[2]-sum[0]*sum[3])/f,n=(sum[5]*sum[3]-sum[0]*sum[1])/f,o=g(-(l/n),b.precision),r=g(1/n,b.precision),s=max*width/(0.3989423*relative.length*n),t=function(a){return[g(a,b.precision),g(s*i(-0.5*(l+n*a)*(l+n*a)),b.precision)]},u=a.map(function(a){return t(a[0])});return{points:u,predict:t,equation:[o,r],r2:g(e(a,u),b.precision)}},sinusoidal:function(b,f){for(var A=Math.sin,B=Math.cos,C=Math.PI,D=f.period||b[b.length-1][0]-b[0][0],E=[0,0,0,0,0,0,0,0,0],F=void 0,G=void 0,H=void 0,I=void 0,J=0;J<b.length;J++)if(null!==b[J][1]){F=b[J][0];var i=b[J][1];G=2*C/D*F,H=B(G),I=A(G),E[0]+=H*H,E[1]+=H*I,E[2]+=I*I,E[3]+=i*H,E[4]+=i*I,E[5]+=1,E[6]+=H,E[7]+=I,E[8]+=i}var j=sum[5],l=sum[2]-sum[7]*sum[7]/j,m=sum[1]-sum[6]*sum[7]/j,n=sum[0]-sum[6]*sum[6]/j,o=sum[4]-sum[8]*sum[7]/j,p=sum[3]-sum[8]*sum[6]/j,q=n*o-m*p,r=l*p-m*o,s=q*q+r*r,t=r*r,u=t/s,v=h(s*t)/(l*n-m*m)/r,w=Math.atan2(u,u*q/r);v=0>v?-v:v,w+=0>v?_MathPI:0,w+=0>w?2*_MathPI:0;var z=(sum[8]-v*_Mathcos(w)*sum[7]-v*_Mathsin(w)*sum[6])/j;v=g(v,f.precision),w=g(w,f.precision);var d=function(a){return[g(a,f.precision),g(v*_Mathsin(2*_MathPI*a/period+w)+z,f.precision)]},x=b.map(function(a){return d(a[0])});return{points:x,predict:d,equation:[v,w],string:'y = '+v+' sin(2\u03C0x/'+period+' + '+w+')',r2:g(e(b,x),f.precision)}}},p=function(){return Object.keys(o).reduce(function reduce(a,d){return l({},a,b({},d,function(a,b){return o[d](a,l({},n,b))}))},{})}();a.default=p});
