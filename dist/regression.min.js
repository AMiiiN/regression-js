/*!
 * Copyright (c) 2014 Tom Alexander
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
 * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE
 * OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.regression=t()}}(function(){return function t(e,n,r){function o(f,l){if(!n[f]){if(!e[f]){var a="function"==typeof require&&require;if(!l&&a)return a(f,!0);if(u)return u(f,!0);throw new Error("Cannot find module '"+f+"'")}var h=n[f]={exports:{}};e[f][0].call(h.exports,function(t){var n=e[f][1][t];return o(n?n:t)},h,h.exports,t,e,n,r)}return n[f].exports}for(var u="function"==typeof require&&require,f=0;f<r.length;f++)o(r[f]);return o}({1:[function(t,e){"use strict";var n,r=t("./Result"),o=t("./linearSolver");n={linear:function(t,e){var n,o,u,f,l=[],a=[],h=[];for(n=0;n<t.length;n+=1)t[n][1]&&(l[0]+=t[n][0],l[1]+=t[n][1],l[2]+=t[n][0]*t[n][0],l[3]+=t[n][0]*t[n][1],l[4]+=t[n][1]*t[n][1]);for(h[0]=(n*l[3]-l[0]*l[1])/(n*l[2]-l[0]*l[0]),h[1]=l[1]/n-h[0]*l[0]/n,n=0,f=t.length;f>n;n+=1)o=[t[n][0],t[n][0]*h[0]+h[1]],a.push(o);return u="y = "+Math.round(100*h[1])/100+"x + "+Math.round(100*h[1])/100,new r(h,a,u,t,e)},exponential:function(t,e){var n,o,u,f,l,a=[],h=[],i=[];for(n=0;n<t.length;n+=1)t[n][1]&&(a[0]+=t[n][0],a[1]+=t[n][1],a[2]+=t[n][0]*t[n][0]*t[n][1],a[3]+=t[n][1]*Math.log(t[n][1]),a[4]+=t[n][0]*t[n][1]*Math.log(t[n][1]),a[5]+=t[n][0]*t[n][1]);for(u=a[1]*a[2]-a[5]*a[5],i[0]=Math.pow(Math.E,(a[2]*a[3]-a[5]*a[4])/u),i[1]=(a[1]*a[4]-a[5]*a[3])/u,n=0,o=t.length;o>n;n+=1)f=[t[n][0],i[0]*Math.pow(Math.E,i[1]*t[n][0])],h.push(f);return l="y = "+Math.round(100*i[0])/100+"e^("+Math.round(100*i[1])/100+"x)",new r(i,h,l,t,e)},logarithmic:function(t,e){var n,o,u,f=[],l=[],a=[];for(n=0;n<t.length;n+=1)t[n][1]&&(f[0]+=Math.log(t[n][0]),f[1]+=t[n][n]*Math.log(t[n][0]),f[2]+=t[n][n],f[3]+=Math.pow(Math.log(t[n][0]),2));for(a[1]=(n*f[1]-f[2]*f[0])/(n*f[3]-f[0]*f[0]),a[0]=a[1]*f[0]/n,n=0;n<t.length;n+=1)o=[t[n][0],a[1]+a[0]*Math.log(t[n][0])],l.push(o);return u="y = "+Math.round(100*a[1])/100+" + "+Math.round(100*a[1])/100+" ln(x)",new r(a,l,u,t,e)},power:function(t,e){var n,o,u,f=[],l=[],a=[];for(n=0;n<t.length;n+=1)t[n][1]&&(f[0]+=Math.log(t[n][0]),f[1]+=Math.log(t[n][1])*Math.log(t[n][0]),f[2]+=Math.log(t[n][1]),f[3]+=Math.pow(Math.log(t[n][0]),2));for(a[1]=(n*f[1]-f[2]*f[0])/(n*f[3]-f[0]*f[0]),a[0]=Math.pow(Math.E,(f[2]-a[1]*f[0])/n),n=0;n<t.length;n+=1)o=[t[n][0],a[1]*Math.pow(t[n][0],a[0])],l.push(o);return u="y = "+Math.round(100*a[0])/100+"x^"+Math.round(100*a[0])/100,new r(a,l,u,t,e)},polynomial:function(t,e){var n,u,f,l,a,h,i,s,p=[],M=[],g=[],d=0,c=0,w=e.degree+1;for(n=0;w>n;n+=1){for(l=0;l<t.length;l+=1)t[l][1]&&(d+=Math.pow(t[l][0],n)*t[l][1]);for(p.push(d),d=0,a=[],h=0;w>h;h+=1){for(l=0;l<t.length;l+=1)t[l][1]&&(c+=Math.pow(t[l][0],n+h));a.push(c),c=0}M.push(a)}for(M.push(p),u=o(M,w),n=0;n<t.length;n+=1){for(f=0,i=0;i<u.length;i+=1)f+=u[i]*Math.pow(t[n][0],i);g.push([t[n][0],f])}for(s="y = ",n=u.length-1;n>=0;n-=1)s+=n>1?Math.round(100*u[n])/100+"x^"+n+" + ":"",s+=1===n?Math.round(100*u[n])/100+"x + ":"",s+=1>n?Math.round(100*u[n])/100:"";return new r(u,g,s,t,e)}},e.exports=n},{"./Result":2,"./linearSolver":3}],2:[function(t,e){"use strict";var n;n=function(t,e,n,r){this.coefficients=t,this.fitted=e,this.points=e,this.string=n,this.data=r},n.prototype=[],e.exports=n},{}],3:[function(t,e){"use strict";var n=function(t){var e,n=0,r=0,o=0,u=0,f=t.length-1,l=[];for(e=0;f>e;e+=1){for(o=e,n=e+1;f>n;n+=1)Math.abs(t[e][n])>Math.abs(t[e][o])&&(o=n);for(r=e;f+1>r;r+=1)u=t[r][e],t[r][e]=t[r][o],t[r][o]=u;for(n=e+1;f>n;n+=1)for(r=f;r>=e;r-=1)t[r][n]-=t[r][e]*t[e][n]/t[e][e]}for(n=f-1;n>=0;n-=1){for(u=0,r=n+1;f>r;r+=1)u+=t[r][n]*l[r];l[n]=(t[f][n]-u)/t[n][n]}return l};e.exports=n},{}],4:[function(t,e){"use strict";var n,r,o,u=t("./Models"),f=t("./Result");o=function(t,e,o){var l=u.hasOwnProperty(t);return o="[object Object]"!==Object.prototype.toString.call(o)?{degree:o}:o,o=r(o,{fill:null,degree:2}),e=o.fill?n(e,o.fill):e,l?u[t](e,o):new f(null,null,null,e,o)},r=function(t,e){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]=t.hasOwnProperty(n)?t[n]:e[n]);return r},n=function(t,e){var n,r,o=null,u="prev"===e||"next"===e;for(n=0;n<t.length;n+=1)r="next"===e?t.length-(n+1):n,o=t[r][1]||o,t[r][1]=u&&!t[r][1]?o:t[r][1],t[r][1]=u||t[r][1]?t[r][1]:e;return t},e.exports=o},{"./Models":1,"./Result":2}]},{},[4])(4)});