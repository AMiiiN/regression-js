(function(a,b){if('function'==typeof define&&define.amd)define(['exports'],b);else if('undefined'!=typeof exports)b(exports);else{var c={exports:{}};b(c.exports),a.regression=c.exports}})(this,function(a){'use strict';function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function e(a,b){var c=[],e=[];a.forEach(function(a,d){null!==a[1]&&(e.push(a),c.push(b[d]))});var d=e.reduce(function(b,a){return b+a[1]},0),f=d/e.length,g=e.reduce(function(b,a){var c=a[1]-f;return b+c*c},0),h=e.reduce(function(a,b,d){var e=c[d],f=b[1]-e[1];return a+f*f},0);return 1-h/g}function f(a,b){var c=Math.abs,d=0,e=0,f=0,g=0,h=0,i=a,j=a.length-1,k=[b];for(d=0;d<j;d++){for(g=d,e=d+1;e<j;e++)c(i[d][e])>c(i[d][g])&&(g=e);for(f=d;f<j+1;f++)h=i[f][d],i[f][d]=i[f][g],i[f][g]=h;for(e=d+1;e<j;e++)for(f=j;f>=d;f--)i[f][e]-=i[f][d]*i[d][e]/i[d][d]}for(e=j-1;0<=e;e--){for(h=0,f=e+1;f<j;f++)h+=i[f][e]*k[f];k[e]=(i[j][e]-h)/i[e][e]}return k}function g(a,b){var c=10**b;return Math.round(a*c)/c}var c=Math.exp,b=Math.log;Object.defineProperty(a,'__esModule',{value:!0}),a.round=g,a.default=function(a,b,c,d){var e='object'===('undefined'==typeof c?'undefined':h(c))&&'undefined'==typeof d?c:d||{};return e.precision||(e.precision=i),'string'==typeof a?j[a.toLowerCase()](b,c,e):null};var h='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},i=2,j={linear:function(a,b,c){for(var l=[0,0,0,0,0],m=0,o=0;o<a.length;o++)null!==a[o][1]&&(m++,l[0]+=a[o][0],l[1]+=a[o][1],l[2]+=a[o][0]*a[o][0],l[3]+=a[o][0]*a[o][1],l[4]+=a[o][1]*a[o][1]);var d=len*sum[2]-sum[0]*sum[0],f=len*sum[3]-sum[0]*sum[1],h=0==d?0:g(f/d,c.precision),i=g(sum[1]/len-h*sum[0]/len,c.precision),j=function(a){return[g(a,c.precision),g(h*a+i,c.precision)]},k=a.map(function(a){return j(a[0])});return{points:k,predict:j,equation:[h,i],r2:g(e(a,k),c.precision),string:0===i?'y = '+h+'x':'y = '+h+'x + '+i}},exponential:function(d,f,h){for(var p=[0,0,0,0,0,0],q=0;q<d.length;q++)null!==d[q][1]&&(p[0]+=d[q][0],p[1]+=d[q][1],p[2]+=d[q][0]*d[q][0]*d[q][1],p[3]+=d[q][1]*b(d[q][1]),p[4]+=d[q][0]*d[q][1]*b(d[q][1]),p[5]+=d[q][0]*d[q][1]);var i=sum[1]*sum[2]-sum[5]*sum[5],j=c((sum[2]*sum[3]-sum[5]*sum[4])/i),a=(sum[1]*sum[4]-sum[5]*sum[3])/i,k=g(j,h.precision),l=g(a,h.precision),m=function(a){return[g(a,h.precision),g(k*c(l*a),h.precision)]},o=d.map(function(a){return m(a[0])});return{points:o,predict:m,equation:[k,l],string:'y = '+k+'e^('+l+'x)',r2:g(e(d,o),h.precision)}},logarithmic:function(c,d,f){for(var l=[0,0,0,0],m=c.length,o=0;o<m;o++)null!==c[o][1]&&(l[0]+=b(c[o][0]),l[1]+=c[o][1]*b(c[o][0]),l[2]+=c[o][1],l[3]+=b(c[o][0])**2);var h=(len*sum[1]-sum[2]*sum[0])/(len*sum[3]-sum[0]*sum[0]),a=g(h,f.precision),i=g((sum[2]-a*sum[0])/len,f.precision),j=function(c){return[g(c,f.precision),g(g(i+a*b(c),f.precision),f.precision)]},k=c.map(function(a){return j(a[0])});return{points:k,predict:j,equation:[i,a],string:'y = '+i+' + '+a+' ln(x)',r2:g(e(c,k),f.precision)}},power:function(d,f,h){for(var o=[0,0,0,0,0],p=d.length,q=0;q<p;q++)null!==d[q][1]&&(o[0]+=b(d[q][0]),o[1]+=b(d[q][1])*b(d[q][0]),o[2]+=b(d[q][1]),o[3]+=b(d[q][0])**2);var i=(len*sum[1]-sum[0]*sum[2])/(len*sum[3]-sum[0]**2),j=(sum[2]-i*sum[0])/len,a=g(c(j),h.precision),k=g(i,h.precision),l=function(b){return[g(b,h.precision),g(g(a*b**k,h.precision),h.precision)]},m=d.map(function(a){return l(a[0])});return{points:m,predict:l,equation:[a,k],string:'y = '+a+'x^'+k,r2:g(e(d,m),h.precision)}},polynomial:function(h,m,n){var o,c,k,i,j,l=[],p=[],q=0,a=0,b=h.length;for(c='undefined'==typeof m?3:m+1,k=0;k<c;k++){for(j=0;j<b;j++)null!==h[j][1]&&(q+=h[j][0]**k*h[j][1]);for(l.push(q),q=0,o=[],i=0;i<c;i++){for(j=0;j<b;j++)null!==h[j][1]&&(a+=h[j][0]**(k+i));o.push(a),a=0}p.push(o)}p.push(l);var r=f(p,c).map(function(a){return g(a,n.precision)}),s=function(a){return[g(a,n.precision),g(r.reduce(function(b,c,d){return b+c*a**d},0),n.precision)]},t=h.map(function(a){return s(a[0])}),u='y = ';for(k=r.length-1;0<=k;k--)u+=1<k?r[k]+'x^'+k+' + ':1===k?r[k]+'x + ':r[k];return{string:u,points:t,predict:s,equation:[].concat(d(r)).reverse(),r2:g(e(h,t),n.precision)}}}});
