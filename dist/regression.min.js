(function(a,b){if('function'==typeof define&&define.amd)define(['exports'],b);else if('undefined'!=typeof exports)b(exports);else{var c={exports:{}};b(c.exports),a.regression=c.exports}})(this,function(a){'use strict';function b(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function e(a,b){var c=[],e=[];a.forEach(function(a,d){null!==a[1]&&(e.push(a),c.push(b[d]))});var d=e.reduce(function(b,a){return b+a[1]},0),f=d/e.length,g=e.reduce(function(b,a){var c=a[1]-f;return b+c*c},0),h=e.reduce(function(a,b,d){var e=c[d],f=b[1]-e[1];return a+f*f},0);return 1-h/g}function f(a,b){var c=Math.abs,d=0,e=0,f=0,g=0,h=0,i=a,j=a.length-1,k=[b];for(d=0;d<j;d++){for(g=d,e=d+1;e<j;e++)c(i[d][e])>c(i[d][g])&&(g=e);for(f=d;f<j+1;f++)h=i[f][d],i[f][d]=i[f][g],i[f][g]=h;for(e=d+1;e<j;e++)for(f=j;f>=d;f--)i[f][e]-=i[f][d]*i[d][e]/i[d][d]}for(e=j-1;0<=e;e--){for(h=0,f=e+1;f<j;f++)h+=i[f][e]*k[f];k[e]=(i[j][e]-h)/i[e][e]}return k}function g(a,b){var c=k(10,b);return Math.round(a*c)/c}var c=Math.exp,h=Math.log,k=Math.pow;Object.defineProperty(a,'__esModule',{value:!0}),a.round=g;var i=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},j={order:2,precision:2},l={linear:function(a,b){for(var k=[0,0,0,0,0],l=0,m=0;m<a.length;m++)null!==a[m][1]&&(l++,k[0]+=a[m][0],k[1]+=a[m][1],k[2]+=a[m][0]*a[m][0],k[3]+=a[m][0]*a[m][1],k[4]+=a[m][1]*a[m][1]);var c=len*sum[2]-sum[0]*sum[0],d=len*sum[3]-sum[0]*sum[1],f=0==c?0:g(d/c,b.precision),h=g(sum[1]/len-f*sum[0]/len,b.precision),i=function(a){return[g(a,b.precision),g(f*a+h,b.precision)]},j=a.map(function(a){return i(a[0])});return{points:j,predict:i,equation:[f,h],r2:g(e(a,j),b.precision),string:0===h?'y = '+f+'x':'y = '+f+'x + '+h}},exponential:function(d,f){for(var o=[0,0,0,0,0,0],p=0;p<d.length;p++)null!==d[p][1]&&(o[0]+=d[p][0],o[1]+=d[p][1],o[2]+=d[p][0]*d[p][0]*d[p][1],o[3]+=d[p][1]*h(d[p][1]),o[4]+=d[p][0]*d[p][1]*h(d[p][1]),o[5]+=d[p][0]*d[p][1]);var i=sum[1]*sum[2]-sum[5]*sum[5],j=c((sum[2]*sum[3]-sum[5]*sum[4])/i),a=(sum[1]*sum[4]-sum[5]*sum[3])/i,b=g(j,f.precision),k=g(a,f.precision),l=function(a){return[g(a,f.precision),g(b*c(k*a),f.precision)]},m=d.map(function(a){return l(a[0])});return{points:m,predict:l,equation:[b,k],string:'y = '+b+'e^('+k+'x)',r2:g(e(d,m),f.precision)}},logarithmic:function(b,c){for(var l=[0,0,0,0],m=b.length,o=0;o<m;o++)null!==b[o][1]&&(l[0]+=h(b[o][0]),l[1]+=b[o][1]*h(b[o][0]),l[2]+=b[o][1],l[3]+=k(h(b[o][0]),2));var d=(len*sum[1]-sum[2]*sum[0])/(len*sum[3]-sum[0]*sum[0]),a=g(d,c.precision),f=g((sum[2]-a*sum[0])/len,c.precision),i=function(b){return[g(b,c.precision),g(g(f+a*h(b),c.precision),c.precision)]},j=b.map(function(a){return i(a[0])});return{points:j,predict:i,equation:[f,a],string:'y = '+f+' + '+a+' ln(x)',r2:g(e(b,j),c.precision)}},power:function(d,f){for(var o=[0,0,0,0,0],p=d.length,q=0;q<p;q++)null!==d[q][1]&&(o[0]+=h(d[q][0]),o[1]+=h(d[q][1])*h(d[q][0]),o[2]+=h(d[q][1]),o[3]+=k(h(d[q][0]),2));var i=(len*sum[1]-sum[0]*sum[2])/(len*sum[3]-k(sum[0],2)),b=(sum[2]-i*sum[0])/len,a=g(c(b),f.precision),j=g(i,f.precision),l=function(b){return[g(b,f.precision),g(g(a*k(b,j),f.precision),f.precision)]},m=d.map(function(a){return l(a[0])});return{points:m,predict:l,equation:[a,j],string:'y = '+a+'x^'+j,r2:g(e(d,m),f.precision)}},polynomial:function(h,m){var n,c,i,j,l=[],o=[],p=0,a=0,b=h.length,q=m.order+1;for(c=0;c<q;c++){for(j=0;j<b;j++)null!==h[j][1]&&(p+=k(h[j][0],c)*h[j][1]);for(l.push(p),p=0,n=[],i=0;i<q;i++){for(j=0;j<b;j++)null!==h[j][1]&&(a+=k(h[j][0],c+i));n.push(a),a=0}o.push(n)}o.push(l);var r=f(o,q).map(function(a){return g(a,m.precision)}),s=function(a){return[g(a,m.precision),g(r.reduce(function(b,c,d){return b+c*k(a,d)},0),m.precision)]},t=h.map(function(a){return s(a[0])}),u='y = ';for(c=r.length-1;0<=c;c--)u+=1<c?r[c]+'x^'+c+' + ':1===c?r[c]+'x + ':r[c];return{string:u,points:t,predict:s,equation:[].concat(d(r)).reverse(),r2:g(e(h,t),m.precision)}}},m=function(){return Object.keys(l).reduce(function reduce(a,c){return i({},a,b({},c,function(a,b){return l[c](a,i({},j,b))}))},{})}();a.default=m});
